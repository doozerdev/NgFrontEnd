<div class="container-fluid">
    <auth mode='login'></auth>
    <div class="row">
        <div class="col-xs-6 col-xs-offset-3">
            <h3>Search for tasks and tips</h3>
            <form id="search-form" ng-submit="search()">
                <div class="input-group">
                    <div class="input-group-btn">
                        <button type="button" class="btn btn-default"  ng-click="search()"><span class="glyphicon glyphicon-search"></span>&nbsp;</button>
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            {{searchField.items}} <span class="glyphicon glyphicon-menu-down"></span>
                        </button>
                        <div class="dropdown-menu row">
                            <a class="dropdown-item col-xs-12" href="" ng-click="setSearchField('titles')">Titles</a>
                            <a class="dropdown-item col-xs-12" href="" ng-click="setSearchField('notes')">Task Notes / Tip Description</a>
                            <a class="dropdown-item col-xs-12" href="" ng-click="setSearchField('tags')">Tags</a>
                        </div>
                    </div>
                    <input type="text" ng-model="searchTerm" class="form-control" placeholder="enter a search term" />
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button" ng-click="clearSearch()">
                            <span class="glyphicon glyphicon-remove"></span>&nbsp;
                        </button>
                    </span>
                </div>
            </form>
            <br/>
        </div>
    </div><!--/.row-->
    <div class="row">
        <div class="col-xs-6">
            <div class="well">
                <h3>TASKS</h3>
                <div class='row'>
                    <div class="col-xs-12 col-sm-6">
                        <h5>All active tasks across {{users.length}} (non-test) users: {{active_beta_items.length}}</h5>
                    </div>
                    <div class="col-xs-12 col-sm-6">
                        <a href="#/alltasks" class="pull-right clearfix">View active and completed tasks</a>
                    </div>
                    <div class="col-xs-12" ng-if='!item_results'>
                        <!--TABS for subsets of items by tags-->
                        <ul class="nav nav-tabs" role="tablist">
                            <li role="presentation" class="active"><a href="" data-target="#DIY" aria-controls="DIYtasks" role="tab" data-toggle="tab">DIY Tasks</a></li>
                            <li role="presentation"><a href="" data-target="#ignore" aria-controls="IgnoreTasks" role="tab" data-toggle="tab">Ignore Tasks</a></li>
                            <li role="presentation"><a href="" data-target="#untagged" aria-controls="UntaggedTasks" role="tab" data-toggle="tab">Untagged Tasks</a></li>
                            <li role="presentation"><a href="" data-target="#all" aria-controls="AllTasks" role="tab" data-toggle="tab">All Tasks</a></li>
                        </ul>
                        <!-- TAB panes -->
                        <div class="tab-content">
                            <div role="tabpanel" class="tab-pane fade in active" id="DIY">
                                <div ng-repeat="item in active_beta_items | filter:{tags:'DIY'} | orderBy:'-updated_at'">
                                    <dzr-item item="item" mode="admin-min"></dzr-item>
                                </div>
                            </div>
                            <div role="tabpanel" class="tab-pane fade" id="ignore">
                                <div ng-repeat="item in active_beta_items | filter:{tags:'ignore'} | orderBy:'-updated_at'">
                                    <dzr-item item="item" mode="admin-min"></dzr-item>
                                </div>
                            </div>
                            <div role="tabpanel" class="tab-pane fade" id="untagged">
                                <div ng-repeat="item in active_beta_items | filter:{tags:'!DIY'} | filter:{tags:'!ignore'} | orderBy:'-updated_at'">
                                    <dzr-item item="item" mode="admin-min"></dzr-item>
                                </div>
                            </div>
                            <div role="tabpanel" class="tab-pane fade" id="all">
                                <div ng-repeat="item in active_beta_items | orderBy:'-updated_at'">
                                    <dzr-item item="item" mode="admin-min"></dzr-item>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-12" ng-if='item_results.length < 1'>
                        <p>No task titles match that search term. Please try again.</p>
                        <p>Search completed in {{item_request_time}}.</p>
                    </div>
                    <div class="col-xs-12" ng-if='item_results.length > 0'>
                        <p>Search completed in {{item_request_time}}. {{item_results.length}} results.</p>
                        <div ng-repeat="result in item_results" ng-if="result.parent!=''">
                            <dzr-item item="result" mode="admin-min"></dzr-item>
                        </div>
                    </div>
                </div><!--/.row-->
            </div><!--/.well-->
        </div><!--/.col-->
        <div class="col-xs-6">
            <div class="well">
                <h3>TIPS</h3>
                <dzr-solution-edit solutions="solutions"></dzr-solution-edit>
                <div class='row'>
                    <div class="col-sm-12" ng-show="!solution_results">
                        <h5>Total available tips: {{solutions.length}}</h5>
                        <div ng-repeat="solution in solutions | orderBy:'-created_at'">
                            <dzr-solution solution="solution" mode="admin-min"></dzr-solution>
                        </div>
                    </div>
                    <div class="col-sm-12" ng-show="solution_results.length < 1">
                        <p>No tip titles match that search term. Please try again.</p>
                        <p>Search completed in {{solution_request_time}}.</p>
                    </div>
                    <div class="col-xs-12" ng-if='solution_results.length > 0'>
                        <p>Search completed in {{solution_request_time}}. {{solution_results.length}} results.</p>
                        <div ng-repeat="result in solution_results">
                            <dzr-solution solution="result" mode="admin-min"></dzr-solution>
                        </div>
                    </div>
                </div>
            </div><!--/.well-->
        </div><!--/.col-->
    </div><!--/.row-->
</div><!--/.container-fluid-->



