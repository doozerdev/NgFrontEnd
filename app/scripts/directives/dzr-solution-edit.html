<div class="panel panel-default">
<!--Panel Header = Button-->
    <div ng-if="mode!='simple'" class="panel-heading bg-brand text-center cursor-hand" data-toggle="collapse" data-target="#newSolution" aria-expanded="false" aria-controls="newSolution">
        <h4 class="panel-title">{{btnText}}</h4>
    </div>
    
<!--Collapsed Panel Body-->
    <div class="panel-body collapse outline-brand" ng-class="mode=='simple' ? 'in' : ''" id="newSolution">
        <div class="row" ng-if="mode=='simple' && solution.link">
            <h4 class="col-xs-3">Preview:</h4>
            <div class="col-xs-6" ng-if="imageOptions.length > 0">
                <ul class="pagination center-block dzr-pagination">
                    <li><span ng-click="cycleImage('prev')" aria-label="Previous" aria-hidden="true">&laquo;</span></li>
                    <li><span>{{currentImageIndex + 1}} of {{imageOptions.length}} total images</span></li>
                    <li><span ng-click="cycleImage('next')" aria-label="Next" aria-hidden="true">&raquo;</span></li>
                </ul>
            </div>
            <div class="col-xs-6 text-center dzr-pagination" ng-if="mode!='edit' && imageOptions.length < 1">
                No images available
            </div>
            <div class="col-xs6 center-block dzr-pagination" ng-if="mode=='edit' && imageOptions.length < 1">
                <button type="button" class="btn" ng-click="fillPreview(solution.link)">Get images from URL</button>
                <span ng-if="triedGetImages">No images found</span>
            </div>
            <div class="col-xs-12" ng-if="mode!='edit'">
                <dzr-solution solution="solution"></dzr-solution>
            </div>
        </div>
        <form class="form-horizontal" id="newSolForm" ng-submit="createSolution()">
            <div class="form-group">
                <label for="inputLink" class="col-xs-2 control-label">Link</label>
                <div class="col-xs-10">
                    <input ng-if="mode!='edit'" type="text" class="form-control" id="inputLink" ng-trim="true" placeholder="URL (include http://)" 
                           ng-model="solution.link" required
                           ng-change="fillPreview(solution.link)" ng-model-options="{updateOn: 'default blur', debounce:{default:2000, blur:0}}" />
                    <input ng-if="mode=='edit'" type="text" class="form-control" id="inputLink" ng-trim="true" placeholder="URL (include http)"
                           ng-model="solution.link" 
                           ng-change="saveEdits()" ng-model-options="{updateOn: 'default blur submit', debounce:{default:2000, blur:0}}" />
                           
                </div>
            </div>
            <div class="form-group">
                <label for="inputDescrip" class="col-xs-2 control-label">Tip</label>
                <div class="col-xs-10">
                    <textarea class="form-control" rows="4" ng-trim="true" id="inputDescrip" placeholder="Tell them why this helps their task" 
                            ng-model="solution.description" required
                            ng-change="saveEdits()" ng-model-options="{updateOn: 'default blur submit', debounce:{default:2000, blur:0}}">
                    </textarea>
                </div>
            </div>
            <div class="form-group" ng-if="mode!='simple'">
                <label for="inputTags" class="col-xs-2 control-label">Tags</label>
                <div class="col-xs-10">
                    <input type="text" class="form-control" ng-trim="true" id="inputTags" placeholder="Areas of expertise (comma separated)" 
                            ng-model="solution.tags"
                            ng-change="saveEdits()" ng-model-options="{updateOn: 'default blur submit', debounce:{default:2000, blur:0}}" />
                </div>
            </div>
            <div class="form-group" ng-if="mode=='simple'">
                <label for="inputTitle" class="col-xs-2 control-label">Title (edit if needed)</label>
                <div class="col-xs-10">
                    <input type="text" class="form-control" id="inputTitle" ng-trim="true" placeholder="Title for the webpage" 
                            ng-model="solution.title" required 
                            ng-change="saveEdits()" ng-model-options="{updateOn: 'default blur submit', debounce:{default:2000, blur:0}}" />
                </div>
            </div>
            <!--Link Metadata (Advanced)-->
            <div class="row" ng-if="mode!='simple'">
                <div class="col-xs-12" ng-if="solution.link || mode=='edit'">
                    <a href="" data-toggle="collapse" data-target="#metadata"><h5>&rsaquo; Edit webpage metadata:</h5></a>
                    <div class="collapse" id="metadata">
                        <div class="form-group">
                            <label for="inputTitle" class="col-xs-2 control-label">Title</label>
                            <div class="col-xs-10">
                                <input type="text" class="form-control" id="inputTitle" ng-trim="true" placeholder="Title for the webpage" 
                                        ng-model="solution.title" required 
                                        ng-change="saveEdits()" ng-model-options="{updateOn: 'default blur submit', debounce:{default:2000, blur:0}}" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="inputImage" class="col-xs-2 control-label">Image</label>
                            <div class="col-xs-10">
                                <input type="text" class="form-control" id="inputImage" ng-trim="true" placeholder="Image URL (include http)" 
                                       ng-model="solution.img_link"
                                       ng-change="saveEdits()" ng-model-options="{updateOn: 'default blur submit', debounce:{default:2000, blur:0}}" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--Admin fields-->
            <div class="row">
                <div class="col-xs-12" ng-if="mode!='expert' && mode!='simple'">
                    <a href="" data-toggle="collapse" data-target="#admin"><h5>&rsaquo; Admin fields:</h5></a>
                    <div class="collapse" id="admin">
                        <div class="form-group">
                            <label for="inputSource" class="col-xs-2 control-label">Expert</label>
                            <div class="col-xs-10">
                                <input type="text" class="form-control" id="inputSource" ng-trim="true" placeholder="Name of expert (aka source property)" 
                                        ng-model="solution.source"
                                        ng-change="saveEdits()" ng-model-options="{updateOn: 'default blur submit', debounce:{default:2000, blur:0}}" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="inputNotes" class="col-xs-2 control-label">Bio-line</label>
                            <div class="col-xs-10">
                                <textarea class="form-control" id="inputNotes" ng-trim="true" rows="1" placeholder="One-line bio of expert (aka notes property)" 
                                        ng-model="solution.notes"
                                        ng-change="saveEdits()" ng-model-options="{updateOn: 'default blur submit', debounce:{default:2000, blur:0}}">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="inputExpire" class="col-xs-2 control-label">Expires</label>
                            <div class="col-xs-4">
                                <input type="date" class="form-control" id="inputExpire" ng-trim="true" placeholder="Expiration Date" 
                                        ng-model="solution.expire_date"
                                        ng-change="saveEdits()" ng-model-options="{updateOn: 'default blur submit', debounce:{default:2000, blur:0}}" />
                            </div>
                        </div>
                    </div>
                </div>
                <!--Location / place / contact fields-->
                <div class="col-xs-12" ng-if="mode!='expert' && mode!='simple'">
                    <a href="" data-toggle="collapse" data-target="#place"><h5>&rsaquo; Contact info and location (optional):</h5></a>
                    <div class="collapse" id="place">
                        <input type="text" class="form-control" id="phoneinput" ng-trim="true" placeholder="Phone Number" 
                                ng-model="solution.phone_number"
                                ng-change="saveEdits()" ng-model-options="{updateOn: 'default blur submit', debounce:{default:2000, blur:0}}" />
                        <input type="text" class="form-control" ng-trim="true" id="hoursinput" placeholder="Open Hours" 
                                ng-model="solution.open_hours"
                                ng-change="saveEdits()" ng-model-options="{updateOn: 'default blur submit', debounce:{default:2000, blur:0}}" />
                        <input type="text" class="form-control" id="addressinput" ng-trim="true" placeholder="Address"
                                ng-model="solution.address" 
                                ng-change="saveEdits()" ng-model-options="{updateOn: 'default blur submit', debounce:{default:2000, blur:0}}" />
                    </div>
                </div>
                <div class="col-xs-12 create-button" ng-if="mode!='edit'">
                    <br/>
                    <button type="submit" class="btn btn-primary btn-lg pull-right clearfix">Create tip!</button>
                    <br/>
                </div>
            </div>
        </form>
    </div><!-- /.panel-body -->
</div><!-- /.panel-->